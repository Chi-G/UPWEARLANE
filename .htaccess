<IfModule mod_rewrite.c>
    RewriteEngine On

    # 1. Security: Block Access to DotFiles and Composer
    RewriteRule ^(\.env|\.git|composer\.(json|lock)|package(-lock)?\.json|yarn\.lock) - [F,L]

    # 2. Asset Passthrough: Rewrite specific asset folders to the "public" folder if they exist
    # This allows standard standard "asset()" URLs to work without changing ASSET_URL in env
    RewriteCond %{DOCUMENT_ROOT}/public/$1 -f
    RewriteRule ^(.*)$ public/$1 [L]

    # 3. Explicitly map typical assets just in case the check above fails on shared hosting logic
    RewriteRule ^(build/.*)$ public/$1 [L]
    RewriteRule ^(images/.*)$ public/$1 [L]
    RewriteRule ^(robots\.txt)$ public/$1 [L]
    RewriteRule ^(favicon\.ico)$ public/$1 [L]

    # 4. Standard Laravel Routing (Updated for Root)
    # If it's not a real file or directory, send to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ index.php [L]
</IfModule>

# Disable Directory Listings
Options -Indexes
